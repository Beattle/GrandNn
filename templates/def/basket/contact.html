<script type="text/javascript" src="<?=$_CORE->TEMPLATES.$_CORE->CURR_TPL?>/JS/validate.js"></script>
<script language="javascript" src="<?=$_CORE->TEMPLATES.$_CORE->CURR_TPL?>/JS/jquery.maskedinput-1.2.2.js"	type="text/javascript"></script>

<script type="text/javascript">
	jQuery(function($) {
		$.mask.definitions['~']='[+-]';
		$('#phone').mask('+7(999)999-99-99');
	});
</script>

<form method="POST" id="basket_contact" action="/basket/contact" >
	<div style="width: 600px; margin: 0 auto;">
	<table cellpadding="0" cellspacing="0" class="noborder" style="width: 500px;">
		<tr>
			<td width="50" valign="bottom">*&nbsp;Плательщик</td>
			<td width="20">&nbsp;</td>
			<td valign="bottom"><input type="text" name="BASKET_CONTACTS[name]" value="<?=@(!empty($_SESSION['_BASKET_name']))?$_SESSION['_BASKET_name']:(!empty($_SESSION['SESS_AUTH']['ALL']['author_comment']))? $_SESSION['SESS_AUTH']['ALL']['author_comment'] : $_POST[BASKET_CONTACTS]['name']?>" class="textField-01"></td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td valign="bottom">*&nbsp;Телефон</td>
			<td>&nbsp;</td>
			<td valign="bottom">
				<input type="text" id="phone" name="BASKET_CONTACTS[phone]" placeholder="+7(___)___-__-__" value="<?=@(!empty($_SESSION['_BASKET_PHONE']))?$_SESSION['_BASKET_PHONE']:(!empty($_SESSION['SESS_AUTH']['ALL']['author_phone']))? $_SESSION['SESS_AUTH']['ALL']['author_phone'] : $_POST[BASKET_CONTACTS]['phone']?>" class="textField-01"></td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td valign="bottom">*&nbsp;E-mail</td>
			<td>&nbsp;</td>
			<td valign="bottom"><input type="text" name="BASKET_CONTACTS[email]" value="<?=@(!empty($_SESSION['_BASKET_EMAIL']))?$_SESSION['_BASKET_EMAIL']:(!empty($_SESSION['SESS_AUTH']['ALL']['author_login']))? $_SESSION['SESS_AUTH']['ALL']['author_login'] : $_POST[BASKET_CONTACTS]['email']?>"	class="textField-01"></td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td valign="bottom">*&nbsp;Ваш город</td>
			<td>&nbsp;</td>
			<td valign="bottom">
				<input type="text" name="BASKET_CONTACTS[city]" value="<?=@(!empty($_SESSION['_BASKET_CITY']))?$_SESSION['_BASKET_CITY']:(!empty($_SESSION['SESS_AUTH']['ALL']['author_city']))? $_SESSION['SESS_AUTH']['ALL']['author_city'] :$_POST[BASKET_CONTACTS]['city']?>" class="textField-01">
			</td>
			<td>&nbsp;</td>
		</tr>
		<tr id="address">
			<td colspan="4">Почтовый индекс, Улица, № дома, № квартиры
			<br />
			<textarea name="BASKET_CONTACTS[address]" style="width: 400px; height: 100px;"><?=@(!empty($_SESSION['_BASKET_ADDRESS']))?$_SESSION['_BASKET_ADDRESS']:(!empty($_SESSION['SESS_AUTH']['ALL']['author_address']))? $_SESSION['SESS_AUTH']['ALL']['author_address'] :$_POST[BASKET_CONTACTS]['address']?></textarea>
			</td>
		</tr>
		<tr>
			<td colspan="4">При необходимости, оставьте комментарий к заказу
			<br />
			<textarea name="BASKET_CONTACTS[comments]" style="width: 400px; height: 100px;"><?=@(!empty($_SESSION['_BASKET_COMMENTS']))?$_SESSION['_BASKET_COMMENTS']:$_POST[BASKET_CONTACTS]['comments']; ?></textarea>
			</td>
		</tr>
		</table>
		<p>
				Заполните контактную информацию, наши менеджеры свяжутся с Вами <br>
				когда заказ будет готов. <br>
				Все поля обязательны для заполнения.
		</p>
	
	<input name="Submit22" type="submit" class="btn" value="ДАЛЕЕ" style="float: right;" />
	</div>
</form>
<script type="text/javascript">
$(document).ready(function(){
	$("#basket_contact").validate({
	    rules: {
	      'BASKET_CONTACTS[name]': {
	        required: true,
	        minlength: 2
	      },	
	      'BASKET_CONTACTS[email]': {
	        required: true,
	        email: true
	      },
			'BASKET_CONTACTS[phone]': {
	        required: true,
			rangelength: [16, 16]
	      },
	      'BASKET_CONTACTS[city]': {
	        required: true,
	        minlength: 2
	      }		  
	    },
	    messages: {
	      'BASKET_CONTACTS[name]': {
	        required: "<br>Пожалуйста, укажите плательщика.",
	        minlength: "<br>Пожалуйста, введите не менее 2 символов"
	      },
		  'BASKET_CONTACTS[email]': {
	        required: "<br>Пожалуйста, укажите Ваш email для связи.",
	        email:"<br>Пожалуйста, укажите Ваш email."
	      },
	      'BASKET_CONTACTS[phone]': {
	        required: "<br>Номер телефона слишком короткий.",
	        rangelength: "<br>Пожалуйста, введите номер телефона"
	      },
		  'BASKET_CONTACTS[city]': {
	        required: "<br>Пожалуйста, введите название вашего города.",
	        minlength: "<br>Пожалуйста, введите не менее 2 символов"
	      }
	    }
	});
});
</script>
