// Ion.RangeSlider
// version 1.7.0
// https://github.com/IonDen/ion.rangeSlider
(function(c){var S=0,J=function(){var c=navigator.userAgent,a=/msie\s\d+/i;return 0<c.search(a)?(c=a.exec(c).toString(),c=c.split(" ")[1],9>c?!0:!1):!1}(),F;try{document.createEvent("TouchEvent"),F=!0}catch(ca){F=!1}var E={init:function(p){var a=c.extend({min:10,max:100,from:null,to:null,type:"single",step:1,prefix:"",postfix:"",hasGrid:!1,hideText:!1,prettify:!0,onChange:null,onFinish:null},p),q='<span class="irs">',q=q+'<span class="irs-line"><span class="irs-line-left"></span><span class="irs-line-mid"></span><span class="irs-line-right"></span></span>',
q=q+'<span class="irs-min">0</span><span class="irs-max">1</span>',q=q+'<span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span>',q=q+"</span>",q=q+'<span class="irs-grid"></span>',G='<span class="irs-diapason"></span>',G=G+'<span class="irs-slider from"></span>',G=G+'<span class="irs-slider to"></span>';return this.each(function(){var k=c(this);if(!k.data("isActive")){k.data("isActive",!0);S++;this.pluginCount=S;var p={min:parseInt(k.attr("value").split(";")[0])||
a.min,max:parseInt(k.attr("value").split(";")[1])||a.max,from:parseInt(k.data("from"))||a.from||a.min,to:parseInt(k.data("to"))||a.to||a.max,type:k.data("type")||a.type,step:parseInt(k.data("step"))||a.step,prefix:k.data("prefix")||a.prefix,postfix:k.data("postfix")||a.postfix,hasGrid:k.data("hasgrid")||a.hasGrid,hideText:k.data("hidetext")||a.hideText,prettify:k.data("prettify")||a.prettify};a=c.extend(a,p);a.from<a.min&&(a.from=a.min);a.to>a.max&&(a.to=a.max);"double"===a.type&&(a.from>a.to&&(a.from=
a.to),a.to<a.from&&(a.to=a.from));var t=function(b){b=b.toString();return a.prettify?b.replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1 "):b},p='<span class="irs" id="irs-'+this.pluginCount+'"></span>';k[0].style.display="none";k.before(p);var w=c("#irs-"+this.pluginCount),E=c(document.body),T=c(window),d,B,C,x,y,s,z,m,r,u,P,U,n=!1,v=!1,V=!0,g={},Q=0,K=0,L=0,l=0,A=0,H=0,R=0,M=0,N=0,W=0;this.updateData=function(b){a=c.extend(a,b);w.find("*").off();w.html("");X()};this.removeSlider=function(){w.find("*").off();
w.html("").remove();k.data("isActive",!1);k.show()};var X=function(){w.html(q);d=w.find(".irs");B=d.find(".irs-min");C=d.find(".irs-max");x=d.find(".irs-from");y=d.find(".irs-to");s=d.find(".irs-single");U=w.find(".irs-grid");a.hideText?(B[0].style.display="none",C[0].style.display="none",x[0].style.display="none",y[0].style.display="none",s[0].style.display="none"):(B.html(a.prefix+t(a.min)+a.postfix),C.html(a.prefix+t(a.max)+a.postfix));K=B.outerWidth();L=C.outerWidth();if("single"===a.type){if(d.append('<span class="irs-slider single"></span>'),
z=d.find(".single"),z.on("mousedown",function(a){a.preventDefault();a.stopPropagation();D(a,c(this),null);v=n=!0;J&&c("*").prop("unselectable",!0)}),F)z.on("touchstart",function(a){a.preventDefault();a.stopPropagation();D(a.originalEvent,c(this),null);v=n=!0})}else"double"===a.type&&(d.append(G),m=d.find(".from"),r=d.find(".to"),P=d.find(".irs-diapason"),I(),m.on("mousedown",function(a){a.preventDefault();a.stopPropagation();c(this).addClass("last");r.removeClass("last");D(a,c(this),"from");v=n=!0;
J&&c("*").prop("unselectable",!0)}),r.on("mousedown",function(a){a.preventDefault();a.stopPropagation();c(this).addClass("last");m.removeClass("last");D(a,c(this),"to");v=n=!0;J&&c("*").prop("unselectable",!0)}),F&&(m.on("touchstart",function(a){a.preventDefault();a.stopPropagation();c(this).addClass("last");r.removeClass("last");D(a.originalEvent,c(this),"from");v=n=!0}),r.on("touchstart",function(a){a.preventDefault();a.stopPropagation();c(this).addClass("last");m.removeClass("last");D(a.originalEvent,
c(this),"to");v=n=!0})),a.to===a.max&&m.addClass("last"));E.on("mouseup",function(){n&&(n=v=!1,u.removeAttr("id"),u=null,"double"===a.type&&I(),O(),J&&c("*").prop("unselectable",!1))});E.on("mousemove",function(a){n&&(Q=a.pageX,Y())});F&&(T.on("touchend",function(){n&&(n=v=!1,u.removeAttr("id"),u=null,"double"===a.type&&I(),O())}),T.on("touchmove",function(a){n&&(Q=a.originalEvent.pageX,Y())}));Z();aa();a.hasGrid&&ba()},Z=function(){l=d.width();H=z?z.width():m.width();A=l-H},D=function(b,f,e){Z();
V=!1;u=f;u.attr("id","irs-active-slider");f=u.offset().left;W=f+(b.pageX-f)-u.position().left;"single"===a.type?R=d.width()-H:"double"===a.type&&("from"===e?(M=0,N=parseInt(r.css("left"))):(M=parseInt(m.css("left")),N=d.width()-H))},I=function(){var a=m.width(),f=parseInt(m[0].style.left)||m.position().left,e=(parseInt(r[0].style.left)||r.position().left)-f;P[0].style.left=f+a/2+"px";P[0].style.width=e+"px"},Y=function(){var b=Math.round(Q-W);"single"===a.type?(0>b&&(b=0),b>R&&(b=R),O()):"double"===
a.type&&(b<M&&(b=M),b>N&&(b=N),O(),I());u[0].style.left=b+"px"},O=function(){var b={fromNumber:0,toNumber:0,fromPers:0,toPers:0,fromX:0,toX:0},f=a.max-a.min,e;"single"===a.type?(b.fromX=parseInt(z[0].style.left)||z.position().left,b.fromPers=100*(b.fromX/A),e=f/100*b.fromPers+parseInt(a.min),b.fromNumber=Math.round(e/a.step)*a.step):"double"===a.type&&(b.fromX=parseInt(m[0].style.left)||m.position().left,b.fromPers=100*(b.fromX/A),e=f/100*b.fromPers+parseInt(a.min),b.fromNumber=Math.round(e/a.step)*
a.step,b.toX=parseInt(r[0].style.left)||r.position().left,b.toPers=100*(b.toX/A),f=f/100*b.toPers+parseInt(a.min),b.toNumber=Math.round(f/a.step)*a.step);g=b;$()},aa=function(){var b={fromNumber:a.from,toNumber:a.to,fromPers:0,toPers:0,fromX:0,toX:0},f=a.max-a.min;"single"===a.type?(b.fromPers=100*((b.fromNumber-a.min)/f),b.fromX=Math.round(A/100*b.fromPers),z[0].style.left=b.fromX+"px"):"double"===a.type&&(b.fromPers=100*((b.fromNumber-a.min)/f),b.fromX=Math.round(A/100*b.fromPers),m[0].style.left=
b.fromX+"px",b.toPers=100*((b.toNumber-a.min)/f),b.toX=Math.round(A/100*b.toPers),r[0].style.left=b.toX+"px",I());g=b;$()},$=function(){var b,f,e,c,d,h;h=H/2;"single"===a.type?(a.hideText||(x[0].style.display="none",y[0].style.display="none",e=a.prefix+t(g.fromNumber)+a.postfix,s.html(e),d=s.outerWidth(),h=g.fromX-d/2+h,0>h&&(h=0),h>l-d&&(h=l-d),s[0].style.left=h+"px",B[0].style.display=h<K?"none":"block",C[0].style.display=h+d>l-L?"none":"block"),k.attr("value",parseInt(g.fromNumber))):"double"===
a.type&&(a.hideText||(b=a.prefix+t(g.fromNumber)+a.postfix,f=a.prefix+t(g.toNumber)+a.postfix,e=g.fromNumber!=g.toNumber?a.prefix+t(g.fromNumber)+" \u2014 "+a.prefix+t(g.toNumber)+a.postfix:a.prefix+t(g.fromNumber)+a.postfix,x.html(b),y.html(f),s.html(e),b=x.outerWidth(),f=g.fromX-b/2+h,0>f&&(f=0),f>l-b&&(f=l-b),x[0].style.left=f+"px",e=y.outerWidth(),c=g.toX-e/2+h,0>c&&(c=0),c>l-e&&(c=l-e),y[0].style.left=c+"px",d=s.outerWidth(),h=g.fromX+(g.toX-g.fromX)/2-d/2+h,0>h&&(h=0),h>l-d&&(h=l-d),s[0].style.left=
h+"px",f+b<c?(s[0].style.display="none",x[0].style.display="block",y[0].style.display="block"):(s[0].style.display="block",x[0].style.display="none",y[0].style.display="none"),B[0].style.display=h<K||f<K?"none":"block",C[0].style.display=h+d>l-L||c+e>l-L?"none":"block"),k.attr("value",parseInt(g.fromNumber)+";"+parseInt(g.toNumber)));"function"===typeof a.onChange&&a.onChange.call(this,g);"function"!==typeof a.onFinish||(v||V)||a.onFinish.call(this,g)},ba=function(){w.addClass("irs-with-grid");for(var b=
0,c="",e=0,e=0,d="",b=0;20>=b;b++)e=Math.floor(l/20*b),e>=l&&(e=l-1),d+='<span class="irs-grid-pol small" style="left: '+e+'px;"></span>';for(b=0;4>=b;b++)e=Math.floor(l/4*b),e>=l&&(e=l-1),d+='<span class="irs-grid-pol" style="left: '+e+'px;"></span>',c=Math.round(a.min+(a.max-a.min)/4*b),c=Math.round(c/a.step)*a.step,c=t(c),0===b?d+='<span class="irs-grid-text" style="left: '+e+'px; text-align: left;">'+c+"</span>":4===b?(e-=100,d+='<span class="irs-grid-text" style="left: '+e+'px; text-align: right;">'+
c+"</span>"):(e-=50,d+='<span class="irs-grid-text" style="left: '+e+'px;">'+c+"</span>");U.html(d)};X()}})},update:function(c){return this.each(function(){this.updateData(c)})},remove:function(){return this.each(function(){this.removeSlider()})}};c.fn.ionRangeSlider=function(p){if(E[p])return E[p].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof p&&p)c.error("Method "+p+" does not exist for jQuery.ionRangeSlider");else return E.init.apply(this,arguments)}})(jQuery);